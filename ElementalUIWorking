task.wait(1)

local TS = game:GetService("TweenService")

local Plr = game.Players.LocalPlayer
local Gui = Plr.PlayerGui:WaitForChild("ScreenGui")

local TitleText = "Elemental Awakener v.0.1 [2022]"
local InfoText = "Press F9 for more info"

local OpenedText = "⬆ Hide ⬆"
local ClosedText = "⬇ Show ⬇"

--Forging a frame--

local MainFrame = Instance.new("Frame")
MainFrame.BorderSizePixel = 0

local OpenClose = Instance.new("TextButton")
local Exit = Instance.new("TextButton")

--

local Farm = Instance.new("TextButton")
local Autoroll = Instance.new("TextButton")
local AutorollOption = Instance.new("TextButton")

local FarmIndicator = MainFrame:Clone()
local FarmPadding = Instance.new("UIPadding")

--

local TextLabel1 = Instance.new("TextLabel")

---

MainFrame.Parent = Gui

OpenClose.Parent = MainFrame
Exit.Parent = MainFrame

Farm.Parent = MainFrame
Autoroll.Parent = MainFrame
AutorollOption.Parent = Autoroll

FarmIndicator.Parent = Farm
FarmPadding.Parent = Farm

TextLabel1.Parent = MainFrame

---

MainFrame.AnchorPoint = Vector2.new(.5, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
MainFrame.Position = UDim2.new(.5, 0, 0, 0)
MainFrame.Size = UDim2.new(.3, 0, .2, 0)

OpenClose.AnchorPoint = Vector2.new(0, 1)
OpenClose.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
OpenClose.BorderSizePixel = 0
OpenClose.Position = UDim2.new(0, 0, 1, 0)
OpenClose.Size = UDim2.new(1, -20, 0, 20)
OpenClose.Font = Enum.Font.SourceSansBold
OpenClose.TextColor3 = Color3.fromRGB(255, 255, 255)
OpenClose.TextScaled = true

Exit.AnchorPoint = Vector2.new(1, 1)
Exit.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
Exit.BorderSizePixel = 0
Exit.Position = UDim2.new(1, 0, 1, 0)
Exit.Size = UDim2.new(0, 20, 0, 20)
Exit.Font = Enum.Font.FredokaOne
Exit.TextColor3 = Color3.fromRGB(255, 255, 255)
Exit.TextScaled = true
Exit.Text = "X"

--

Farm.AnchorPoint = Vector2.new(0, .5)
Farm.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
Farm.BorderSizePixel = 0
Farm.Position = UDim2.new(.1, 0, .5, 0)
Farm.Size = UDim2.new(.35, 0, 0, 50)
Farm.Font = Enum.Font.Code
Farm.TextColor3 = Color3.fromRGB(255, 255, 255)
Farm.TextScaled = true
Farm.Text = "Spin farm [OFF]"

Autoroll.AnchorPoint = Vector2.new(1, .5)
Autoroll.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
Autoroll.BorderSizePixel = 0
Autoroll.Position = UDim2.new(.9, 0, .5, 12)
Autoroll.Size = UDim2.new(.35, 0, 0, 25)
Autoroll.Font = Enum.Font.Code
Autoroll.TextColor3 = Color3.fromRGB(255, 255, 255)
Autoroll.TextScaled = true
Autoroll.Text = "Autoroll [OFF]"

AutorollOption.AnchorPoint = Vector2.new(.5, 1)
AutorollOption.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
AutorollOption.BorderSizePixel = 0
AutorollOption.Position = UDim2.new(.5, 0, -1, 10)
AutorollOption.Size = UDim2.new(1, 20, 1, 10)
AutorollOption.Font = Enum.Font.Code
AutorollOption.TextColor3 = Color3.fromRGB(225, 225, 225)
AutorollOption.TextScaled = true
AutorollOption.Text = "Exotic or above"


FarmIndicator.AnchorPoint = Vector2.new(.5, 0)
FarmIndicator.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
FarmIndicator.Position = UDim2.new(.5, 0, 1, 10)
FarmIndicator.Size = UDim2.new(1, 20, 0, 5)

local AutorollIndicator = FarmIndicator:Clone()
AutorollIndicator.Parent = Autoroll
AutorollIndicator.Position = UDim2.new(.5, 0, 1, 5)

FarmPadding.PaddingBottom = UDim.new(0, 10)
FarmPadding.PaddingLeft = UDim.new(0, 10)
FarmPadding.PaddingRight = UDim.new(0, 10)
FarmPadding.PaddingTop = UDim.new(0, 10)

local AutorollPadding = FarmPadding:Clone()
AutorollPadding.Parent = Autoroll
AutorollPadding.PaddingBottom = UDim.new(0, 5)
AutorollPadding.PaddingTop = UDim.new(0, 5)

--

TextLabel1.BackgroundTransparency = .9
TextLabel1.Size = UDim2.new(1, 0, 0, 20)
TextLabel1.TextScaled = true
TextLabel1.Font = Enum.Font.SourceSans
TextLabel1.TextColor3 = Color3.fromRGB(200, 200, 200)
TextLabel1.Text = TitleText

local TextLabel2 = TextLabel1:Clone()
TextLabel2.Parent = MainFrame
TextLabel2.AnchorPoint = Vector2.new(0, 1)
TextLabel2.BackgroundTransparency = 1
TextLabel2.Position = UDim2.new(0, 0, 1, 25)
TextLabel2.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel2.Text = InfoText

----

local function Spinfarm()
	Farm.AutoButtonColor = false
	Farm.Text = "Spin farm [REJOIN TO TURN OFF]"
	Farm.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
	FarmIndicator.BackgroundColor3 = Color3.fromRGB(0, 255, 0)

	loadstring(game:HttpGet(('https://raw.githubusercontent.com/Aidez/elemental_awakening/main/level_farm'),true))()
end

local Autoroll_Enabled = false
local HasInstaspin = game:GetService("MarketplaceService"):UserOwnsGamePassAsync(game.Players.LocalPlayer.UserId,20164545)

local function AutorollToggle(st)
	Autoroll_Enabled = st

	Autoroll.Text = "Autoroll "..(st and "[ON]" or "[OFF]")
	AutorollIndicator.BackgroundColor3 = st and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)

	----

	if st then

		local WantedRarities = AutorollOption.Text == "Exotic or above" and {"Heavenly","Legendary","Exotic"} or AutorollOption.Text == "Legendary or above" and {"Heavenly","Legendary"} or AutorollOption.Text == "Heavenly only" and {"Heavenly"}

		print("--------------------------")
		print("-->Autoroll stack begin<--")
		print("--------------------------")
		print("                          ")

		repeat wait(.1)
			local Magic, Rarity
			if HasInstaspin then
				Magic, Rarity = game:GetService("ReplicatedStorage").Events.Spin:InvokeServer(true)
			else
				Magic, Rarity = game:GetService("ReplicatedStorage").Events.Spin:InvokeServer(false)
			end

			if not Magic or not Rarity then
				warn("---!Out of spins!---")
				AutorollToggle(false)

				Autoroll.Text = "Out of spins!"
				AutorollIndicator.BackgroundColor3 = Color3.fromRGB(255, 255, 0)
			end
			print("Rolled "..Magic.." with rarity: "..Rarity)
			if table.find(WantedRarities,Rarity) then
				warn("---!Your preference has rolled out! ("..Rarity.." "..Magic..")---")
				AutorollToggle(false)

				Autoroll.Text = Rarity.." "..Magic.." has rolled out!"
				AutorollIndicator.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
			end
		until not Autoroll_Enabled

		game.Players.LocalPlayer.Character:BreakJoints()

		print("                          ")
		print("--------------------------")
		print("--->Autoroll stack end<---")
		print("--------------------------")

	end
end

local FrameState = false
local FrameDebounce = false

local function SwitchFrameState()
	if not FrameDebounce then

		FrameDebounce = true
		FrameState = not FrameState

		OpenClose.Text = FrameState and OpenedText or ClosedText
		TS:Create(
			MainFrame,
			TweenInfo.new(.125, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut),
			{Position = FrameState and (Gui.IgnoreGuiInset and UDim2.new(.5, 0, 0, 0) or UDim2.new(.5, 0, 0, -38)) or (Gui.IgnoreGuiInset and UDim2.new(.5, 0, -.2, 20) or UDim2.new(.5, 0, -.2, -18))}
		):Play()
		task.wait(.125)

		FrameDebounce = false

	end
end

----

Farm.MouseButton1Click:Connect(Spinfarm)

AutorollToggle(false)
Autoroll.MouseButton1Click:Connect(function()
	AutorollToggle(not Autoroll_Enabled)
end)

local AutorollOptionNumber = 1
AutorollOption.MouseButton1Click:Connect(function()
	AutorollOptionNumber += 1

	if AutorollOptionNumber > 3 then

		AutorollOptionNumber = 1

	end

	----

	AutorollOption.Text = AutorollOptionNumber == 1 and "Exotic or above" or AutorollOptionNumber == 2 and "Legendary or above" or AutorollOptionNumber == 3 and "Heavenly only"
end)


SwitchFrameState()
OpenClose.MouseButton1Click:Connect(SwitchFrameState)

Exit.MouseButton1Click:Connect(function()
	AutorollToggle(false)
	MainFrame:Destroy()
end)
